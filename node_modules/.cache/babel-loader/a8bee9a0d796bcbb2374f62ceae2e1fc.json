{"ast":null,"code":"import _regeneratorRuntime from\"/media/moni/project/ovibason/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/media/moni/project/ovibason/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createAsyncThunk,createSlice}from'@reduxjs/toolkit';import goalService from'./goalService';var initialState={goals:[],isError:false,isSuccess:false,isLoading:false,message:''};// Create new goal\nexport var createGoal=createAsyncThunk('goals/create',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(goalData,thunkAPI){var token,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;token=thunkAPI.getState().auth.user.token;_context.next=4;return goalService.createGoal(goalData,token);case 4:return _context.abrupt(\"return\",_context.sent);case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);message=_context.t0.response&&_context.t0.response.data&&_context.t0.response.data.message||_context.t0.message||_context.t0.toString();return _context.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());// Get user goals\nexport var getGoals=createAsyncThunk('goals/getAll',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_,thunkAPI){var token,message;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;token=thunkAPI.getState().auth.user.token;_context2.next=4;return goalService.getGoals(token);case 4:return _context2.abrupt(\"return\",_context2.sent);case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);message=_context2.t0.response&&_context2.t0.response.data&&_context2.t0.response.data.message||_context2.t0.message||_context2.t0.toString();return _context2.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());// Delete user goal\nexport var deleteGoal=createAsyncThunk('goals/delete',/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id,thunkAPI){var token,message;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;token=thunkAPI.getState().auth.user.token;_context3.next=4;return goalService.deleteGoal(id,token);case 4:return _context3.abrupt(\"return\",_context3.sent);case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);message=_context3.t0.response&&_context3.t0.response.data&&_context3.t0.response.data.message||_context3.t0.message||_context3.t0.toString();return _context3.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}());export var goalSlice=createSlice({name:'goal',initialState:initialState,reducers:{reset:function reset(state){return initialState;}},extraReducers:function extraReducers(builder){builder.addCase(createGoal.pending,function(state){state.isLoading=true;}).addCase(createGoal.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.goals.push(action.payload);}).addCase(createGoal.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;}).addCase(getGoals.pending,function(state){state.isLoading=true;}).addCase(getGoals.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.goals=action.payload;}).addCase(getGoals.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;}).addCase(deleteGoal.pending,function(state){state.isLoading=true;}).addCase(deleteGoal.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.goals=state.goals.filter(function(goal){return goal._id!==action.payload.id;});}).addCase(deleteGoal.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;});}});var reset=goalSlice.actions.reset;export{reset};export default goalSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","goalService","initialState","goals","isError","isSuccess","isLoading","message","createGoal","goalData","thunkAPI","token","getState","auth","user","response","data","toString","rejectWithValue","getGoals","_","deleteGoal","id","goalSlice","name","reducers","reset","state","extraReducers","builder","addCase","pending","fulfilled","action","push","payload","rejected","filter","goal","_id","actions","reducer"],"sources":["/media/moni/project/ovibason/frontend/src/features/goals/goalSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'\nimport goalService from './goalService'\n\nconst initialState = {\n  goals: [],\n  isError: false,\n  isSuccess: false,\n  isLoading: false,\n  message: '',\n}\n\n// Create new goal\nexport const createGoal = createAsyncThunk(\n  'goals/create',\n  async (goalData, thunkAPI) => {\n    try {\n      const token = thunkAPI.getState().auth.user.token\n      return await goalService.createGoal(goalData, token)\n    } catch (error) {\n      const message =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString()\n      return thunkAPI.rejectWithValue(message)\n    }\n  }\n)\n\n// Get user goals\nexport const getGoals = createAsyncThunk(\n  'goals/getAll',\n  async (_, thunkAPI) => {\n    try {\n      const token = thunkAPI.getState().auth.user.token\n      return await goalService.getGoals(token)\n    } catch (error) {\n      const message =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString()\n      return thunkAPI.rejectWithValue(message)\n    }\n  }\n)\n\n// Delete user goal\nexport const deleteGoal = createAsyncThunk(\n  'goals/delete',\n  async (id, thunkAPI) => {\n    try {\n      const token = thunkAPI.getState().auth.user.token\n      return await goalService.deleteGoal(id, token)\n    } catch (error) {\n      const message =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString()\n      return thunkAPI.rejectWithValue(message)\n    }\n  }\n)\n\nexport const goalSlice = createSlice({\n  name: 'goal',\n  initialState,\n  reducers: {\n    reset: (state) => initialState,\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(createGoal.pending, (state) => {\n        state.isLoading = true\n      })\n      .addCase(createGoal.fulfilled, (state, action) => {\n        state.isLoading = false\n        state.isSuccess = true\n        state.goals.push(action.payload)\n      })\n      .addCase(createGoal.rejected, (state, action) => {\n        state.isLoading = false\n        state.isError = true\n        state.message = action.payload\n      })\n      .addCase(getGoals.pending, (state) => {\n        state.isLoading = true\n      })\n      .addCase(getGoals.fulfilled, (state, action) => {\n        state.isLoading = false\n        state.isSuccess = true\n        state.goals = action.payload\n      })\n      .addCase(getGoals.rejected, (state, action) => {\n        state.isLoading = false\n        state.isError = true\n        state.message = action.payload\n      })\n      .addCase(deleteGoal.pending, (state) => {\n        state.isLoading = true\n      })\n      .addCase(deleteGoal.fulfilled, (state, action) => {\n        state.isLoading = false\n        state.isSuccess = true\n        state.goals = state.goals.filter(\n          (goal) => goal._id !== action.payload.id\n        )\n      })\n      .addCase(deleteGoal.rejected, (state, action) => {\n        state.isLoading = false\n        state.isError = true\n        state.message = action.payload\n      })\n  },\n})\n\nexport const { reset } = goalSlice.actions\nexport default goalSlice.reducer\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}