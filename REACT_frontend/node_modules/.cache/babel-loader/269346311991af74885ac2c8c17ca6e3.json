{"ast":null,"code":"import _defineProperty from\"/media/moni/project/ovibason/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/media/moni/project/ovibason/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/media/moni/project/ovibason/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{FaSignInAlt}from'react-icons/fa';import{useDispatch,useSelector}from'react-redux';import{useNavigate}from'react-router-dom';import{toast}from'react-toastify';import Spinner from'../components/Spinner';import{login,reset}from'../features/auth/authSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){var _useState=useState({serial:'',password:''}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var serial=formData.serial,password=formData.password;var navigate=useNavigate();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user,isLoading=_useSelector.isLoading,isError=_useSelector.isError,isSuccess=_useSelector.isSuccess,message=_useSelector.message;useEffect(function(){if(isError){toast.error(message);}if(isSuccess||user){navigate('/');}dispatch(reset());},[user,isError,isSuccess,message,navigate,dispatch]);var onChange=function onChange(e){setFormData(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},e.target.name,e.target.value));});};var onSubmit=function onSubmit(e){e.preventDefault();var userData={serial:serial,password:password};dispatch(login(userData));};if(isLoading){return/*#__PURE__*/_jsx(Spinner,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"heading\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(FaSignInAlt,{}),\" Login\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Login and start setting goals\"})]}),/*#__PURE__*/_jsx(\"section\",{className:\"form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"serial\",name:\"serial\",value:serial,placeholder:\"Enter your Serial\",onChange:onChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",name:\"password\",value:password,placeholder:\"Enter password\",onChange:onChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-block\",children:\"Submit\"})})]})})]});}export default Login;","map":{"version":3,"names":["useEffect","useState","FaSignInAlt","useDispatch","useSelector","useNavigate","toast","Spinner","login","reset","Login","serial","password","formData","setFormData","navigate","dispatch","state","auth","user","isLoading","isError","isSuccess","message","error","onChange","e","prevState","target","name","value","onSubmit","preventDefault","userData"],"sources":["/media/moni/project/ovibason/frontend/src/pages/Login.jsx"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { FaSignInAlt } from 'react-icons/fa'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useNavigate } from 'react-router-dom'\nimport { toast } from 'react-toastify'\nimport Spinner from '../components/Spinner'\nimport { login, reset } from '../features/auth/authSlice'\n\nfunction Login() {\n  const [formData, setFormData] = useState({\n    serial: '',\n    password: '',\n  })\n\n  const { serial, password } = formData\n\n  const navigate = useNavigate()\n  const dispatch = useDispatch()\n\n  const { user, isLoading, isError, isSuccess, message } = useSelector(\n    (state) => state.auth\n  )\n\n  useEffect(() => {\n    if (isError) {\n      toast.error(message)\n    }\n\n    if (isSuccess || user) {\n      navigate('/')\n    }\n\n    dispatch(reset())\n  }, [user, isError, isSuccess, message, navigate, dispatch])\n\n  const onChange = (e) => {\n    setFormData((prevState) => ({\n      ...prevState,\n      [e.target.name]: e.target.value,\n    }))\n  }\n\n  const onSubmit = (e) => {\n    e.preventDefault()\n\n    const userData = {\n      serial,\n      password,\n    }\n\n    dispatch(login(userData))\n  }\n\n  if (isLoading) {\n    return <Spinner />\n  }\n\n  return (\n    <>\n      <section className='heading'>\n        <h1>\n          <FaSignInAlt /> Login\n        </h1>\n        <p>Login and start setting goals</p>\n      </section>\n\n      <section className='form'>\n        <form onSubmit={onSubmit}>\n          <div className='form-group'>\n            <input\n              type='text'\n              className='form-control'\n              id='serial'\n              name='serial'\n              value={serial}\n              placeholder='Enter your Serial'\n              onChange={onChange}\n            />\n          </div>\n          <div className='form-group'>\n            <input\n              type='password'\n              className='form-control'\n              id='password'\n              name='password'\n              value={password}\n              placeholder='Enter password'\n              onChange={onChange}\n            />\n          </div>\n\n          <div className='form-group'>\n            <button type='submit' className='btn btn-block'>\n              Submit\n            </button>\n          </div>\n        </form>\n      </section>\n    </>\n  )\n}\n\nexport default Login\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}